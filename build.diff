diff --git a/BUILD.gn b/BUILD.gn
index c771b81..ffbec0b 100644
--- a/BUILD.gn
+++ b/BUILD.gn
@@ -17,13 +17,14 @@ group("freetype_common") {
 }
 
 config("pdfium_common_config") {
-  cflags = []
+  cflags = [ "-fvisibility=default" ]
   ldflags = []
   include_dirs = [ "." ]
   defines = [
     "OPJ_STATIC",
     "PNG_PREFIX",
     "PNG_USE_READ_MACROS",
+    "FPDFSDK_EXPORTS"
   ]
 
   if (pdf_enable_v8) {
@@ -101,6 +102,11 @@ config("xfa_warnings") {
   }
 }
 
+shared_library("modpdfium") {
+  deps = [":pdfium"]
+  configs -= [ "//build/config/android:hide_all_but_jni_onload" ]
+}
+
 jumbo_static_library("pdfium") {
   sources = [
     "fpdfsdk/cba_annotiterator.cpp",
